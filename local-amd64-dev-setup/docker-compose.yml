services:
  project-dev:
    build:
      context: .
      dockerfile: Dockerfile.dev
      args:
        NODE_VERSION: ${NODE_VERSION:-16.20.2}
    container_name: project-dev
    platform: linux/amd64
    ports:
      - "3000:3000"
    volumes:
      # Mount the entire project directory
      - .:/app
      # Mount node_modules as a separate volume to prevent overwriting
      - /app/node_modules
    environment:
      # Development environment variables
      - NODE_ENV=development
      - CHOKIDAR_USEPOLLING=true
      - FAST_REFRESH=true
      - GENERATE_SOURCEMAP=true
      - BROWSER=none
      # This version is important. this is the version that you project will run on.
      - NODE_VERSION=${NODE_VERSION:-16.20.2}
    stdin_open: true
    tty: true
    # Restart policy
    restart: unless-stopped

